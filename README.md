# 🌐 AI 双语助手 (AI Bilingual Assistant)

> **专为 Gemini 用户打造的翻译增强插件** — 让中文用户无缝使用英文AI，解决翻译、搜索、输入三大痛点

[![Version](https://img.shields.io/badge/version-1.2.0-blue.svg)]()
[![Chrome Extension](https://img.shields.io/badge/Chrome-Extension-green.svg)]()
[![License](https://img.shields.io/badge/license-MIT-orange.svg)]()

---

## 🎯 为什么需要这个插件？

使用 Gemini 时，你是否遇到过这些问题：

| 问题 | 痛点 |
|------|------|
| 🇨🇳 **输入障碍** | 想用中文提问，但 Gemini 用英文回答效果更好 |
| 🇺🇸 **阅读障碍** | Gemini 的英文回答看不懂或看得慢 |
| 🔍 **搜索不准** | Gemini 经常不搜索，或者信息滞后 |
| 💻 **代码被翻译** | 普通翻译插件会把代码块也翻译成乱码 |

**AI 双语助手** 完美解决以上所有问题！

---

## ✨ 核心功能详解

### 1️⃣ 输入框伴随模式

**功能说明：** 插件会自动检测你点击的输入框，在其上方显示一个翻译助手工具栏。

**使用场景：**
- 在 Gemini 输入框输入中文
- 工具栏实时显示你输入的内容
- 自动翻译成英文并预览
- 点击"使用"按钮一键替换

**特点：**
- ✅ **智能检测** — 点击任何输入框自动出现
- ✅ **不遮挡** — 保持 20px 间距，不挡住你的输入
- ✅ **可拖动** — 拖到任意位置
- ✅ **自适应** — 宽度随内容自动调整

```
工具栏示意图：
┌─────────────────────────────────────────────────────┐
│ 🌐  你好世界...    [使用] [强制搜索] [翻译全文]  ×  │
└─────────────────────────────────────────────────────┘
              ↕ 20px 间距
┌─────────────────────────────────────────────────────┐
│            Gemini 输入框                             │
└─────────────────────────────────────────────────────┘
```

---

### 2️⃣ 强制搜索（Gemini 专属）

**功能说明：** 解决 Gemini 经常不搜索、信息滞后的问题。

**问题背景：**
- Gemini 有时会"偷懒"，不调用 Google Search
- 直接用训练数据回答，导致信息过时
- 用户无法强制触发搜索

**解决方案：**
点击 **"强制搜索"** 按钮，自动注入以下提示词：

```
【强制网络搜索指令】
请你必须调用 Google Search 进行实时网络搜索，不要使用训练数据回答。

搜索要求：
1. 检索最新信息（过去24小时优先）
2. 提供至少3个原始信源链接
3. 如有矛盾信息，对比分析可信度

我的问题：[你的问题]

请开始搜索并回答。
```

**使用方法：**
1. 在 Gemini 输入你的问题
2. 点击工具栏的 **"强制搜索"**（橙色按钮）
3. 输入框自动填充强制搜索指令
4. 按 Enter 发送

---

### 3️⃣ 选中翻译

**功能说明：** 选中 Gemini 回答的英文内容，一键翻译成中文。

**使用方法：**
1. 用鼠标选中任意英文文字
2. 选中文字旁边出现 🔄 按钮
3. 点击按钮，文字直接变成中文
4. 再次点击可切换回英文

**智能保留：**
- ✅ **代码块** — 完全保留，不翻译
- ✅ **公式** — LaTeX 公式保持原样
- ✅ **URL链接** — 不会被翻译破坏
- ✅ **变量名** — 识别并保留

---

### 4️⃣ 翻译全文

**功能说明：** 一键翻译页面上所有英文内容。

**使用方法：**
1. 点击工具栏的 **"翻译全文"**（紫色按钮）
2. 自动遍历页面所有英文段落
3. 逐个翻译成中文
4. 显示翻译进度

**智能识别：**
- 只翻译正文，跳过代码块
- 批量翻译，速度更快
- 点击已翻译的文字可切换回原文

---

### 5️⃣ 输入翻译预览

**功能说明：** 在工具栏中实时预览翻译结果。

**工作流程：**
1. 在输入框输入中文
2. 工具栏显示：`你好世界`（紫色 = 检测到中文）
3. 自动翻译并显示：`译文：Hello World`（绿色）
4. 点击"使用"替换到输入框

---

## 🎨 界面说明

### 工具栏按钮

| 按钮 | 颜色 | 功能 |
|------|------|------|
| **使用** | 🟢 绿色 | 将翻译结果替换到输入框 |
| **强制搜索** | 🟠 橙色 | 注入提示词强制开启网络搜索 |
| **翻译全文** | 🟣 紫色 | 翻译页面所有英文内容 |
| **×** | 灰色 | 收起助手（点击右下角 🌐 重新打开） |

### 颜色含义

| 颜色 | 含义 |
|------|------|
| 灰色文字 | 等待输入 |
| 紫色文字 | 检测到中文，准备翻译 |
| 绿色文字 | 翻译结果 |

---

## 🌐 支持的网站

### AI 平台（完整支持）

| 平台 | 网址 | 功能 |
|------|------|------|
| **Google Gemini** ⭐ | gemini.google.com | 全部功能 + 强制搜索 |
| **ChatGPT** | chat.openai.com / chatgpt.com | 全部功能 |
| **Claude** | claude.ai | 全部功能 |

### 其他网站（基础支持）

- ✅ 选中翻译
- ✅ 翻译全文
- ✅ 智能保留代码

---

## 📥 安装方法

### 方法一：开发者模式安装

1. 下载本项目 ZIP 文件并解压
2. 打开 Chrome，访问 `chrome://extensions/`
3. 开启右上角 **"开发者模式"**
4. 点击 **"加载已解压的扩展程序"**
5. 选择解压后的 `ai-bilingual-assistant` 文件夹
6. 完成！访问 Gemini 即可使用

### 方法二：从 GitHub 克隆

```bash
git clone https://github.com/Enk11dou/ifanyi.git
cd ifanyi
```

然后按方法一步骤 2-6 操作。

---

## 🔧 常见问题

### Q: 工具栏没有出现？
**A:** 点击页面上的任意输入框，或点击右下角的 🌐 按钮。

### Q: 强制搜索按钮在哪？
**A:** 工具栏中间的橙色按钮，写着"强制搜索"。

### Q: 翻译结果不准确？
**A:** 当前使用 Google Translate API，后续会支持更多翻译引擎。

### Q: 代码被翻译了？
**A:** 正常情况不会。如果发生，请提交 Issue。

### Q: 在其他网站不工作？
**A:** 请确保刷新页面，并点击输入框激活插件。

---

## 📊 版本历史

| 版本 | 日期 | 主要更新 |
|------|------|----------|
| v1.2.0 | 2026-01-09 | 输入框伴随模式、强制搜索、UI优化 |
| v1.1.0 | 2026-01-09 | 支持所有网站、翻译全文、速度优化 |
| v1.0.0 | 2026-01-08 | 首个正式版本 |

---

## 🚀 未来计划

- [ ] 支持更多翻译引擎 (DeepL, Azure)
- [ ] 快捷键支持 (Alt+T)
- [ ] 双语对照模式
- [ ] 翻译历史记录
- [ ] 自定义提示词模板
- [ ] 术语表/词汇本

---

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

**仓库地址：** https://github.com/Enk11dou/ifanyi

---

## 📄 开源协议

MIT License

---

**Made with ❤️ for Gemini users**
